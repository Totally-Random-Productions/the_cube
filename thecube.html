<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <link rel="shortcut icon" href="assets/testob/cube1.png" type="image/x-icon">

    <title>The CUBE</title>
    <link rel="stylesheet" href="assets/web/assets/mobirise-icons2/mobirise2.css">
    <link rel="stylesheet" href="assets/web/assets/mobirise-icons/mobirise-icons.css">
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap-grid.min.css">
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap-reboot.min.css">
    <link rel="stylesheet" href="assets/dropdown/css/style.css">
    <link rel="stylesheet" href="assets/theme/css/style.css">
    <link rel="preload" as="style" href="assets/mobirise/css/mbr-additional.css">
    <link rel="stylesheet" href="assets/mobirise/css/mbr-additional.css" type="text/css">

    <script src="//cdn.jsdelivr.net/npm/phaser@3.54.0/dist/phaser.js"></script>
    <script src="assets/theme/js/section.js"></script>
    <style type="text/css">
        body {
            margin: 0;
        }
        
        canvas {
            padding: 1px;
            margin: auto;
            display: block;
            width: 1280px;
            height: 720px;
            position: absolute;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
            border: black;
            border-style: solid;
            border-width: 5px;
        }
        
        @font-face {
            font-family: "Minecraft";
            src: url('assets/fonts/Minecraft.ttf');
        }
    </style>

</head>

<body id="gamebody" onload="body();">
    <section class="menu menu2 cid-subQpugyeE" once="menu" id="menu2-0">

        <nav class="navbar navbar-dropdown navbar-fixed-top navbar-expand-lg">
            <div class="container-fluid">
                <div class="navbar-brand">
                    <span class="navbar-logo">
                    <a href="index.html#top">
                        <img src="assets/media/imgs/icons8-the-dragon-team-1024.png" alt="Mobirise" style="height: 3rem;">
                    </a>
                </span>
                    <span class="navbar-caption-wrap"><a class="navbar-caption text-black display-5" href="index.html#top">DRGN Studios</a></span>
                </div>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                <div class="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav nav-dropdown" data-app-modern-menu="true">
                        <li class="nav-item">
                            <a class="nav-link link text-black display-4 tablink" href="index.html">
                                <strong>Home</strong></a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </section>

    <br>
    <br>
    <br>
    <br>


    <script type="text/javascript">
        var level = 'nothing';
        var winSound;
        var deathSound;
        var bgmusic;
        var tutorialmusic;
        var music1;
        var bgmusicIsPlaying = false;
        var tutorialmusicIsPlaying = false;
        var music1IsPlaying = false;
        var volumeLev = 1;
        var trueVolumeLev = volumeLev.toFixed(1);
        var autoRestart = false;
        var showControls = true;

        /*creates a new scene while extending the Phaser Scene Class 
                                                                                                                                                                                                                                                                                                                                                                        so that the default functions remain the same*/
        var StartScene = new Phaser.Class({

            Extends: Phaser.Scene,

            initialize:

                function StartScene() {
                Phaser.Scene.call(this, {
                    key: 'start'
                });
            },

            init: function() //called everytime the scene restarts. I use it to declare variables, 'this' is used so that the scope of the variables is only within this scene.
                {
                    this.startbutton;
                    this.leaderbutton;
                    this.creditsbutton;
                    this.settingsbutton;
                    this.player;
                },

            preload: function() {
                var progressbar = this.add.graphics();
                var percent = this.add.text(100, 430, '%', {
                    fontFamily: 'Minecraft',
                    fontSize: '32px',
                    fill: '#fff'
                });

                this.load.on('progress', function(value) {
                    progressbar.clear();
                    percent.setText(value.toFixed(2) * 100 + '%');
                    progressbar.fillStyle(0x355f76, 1);
                    progressbar.fillRect(100, 360, 1080 * value, 60);

                });

                this.load.on('complete', function() {

                    progressbar.destroy();
                    percent.destroy();

                });

                this.load.image('startbt', 'assets/testob/menustart.png');
                this.load.image('menuback', 'assets/testob/menuback.png');
                this.load.image('leader', 'assets/testob/menuleader.png');
                this.load.image('credit', 'assets/testob/menucredits.png');
                this.load.image('settings', 'assets/testob/menusettings.png');
                this.load.image('cube', 'assets/testob/cube1.png');
                this.load.audio('bg', 'assets/media/music/Monplaisir - Soundtrack.mp3');
            },

            create: function() {
                bgmusic = this.sound.add('bg');
                if (!bgmusicIsPlaying) {
                    bgmusicIsPlaying = true;
                    bgmusic.play({
                        mute: false,
                        volume: volumeLev,
                        loop: false
                    });
                }

                this.add.image(0, 0, 'menuback').setOrigin(0);

                this.startbutton = this.add.image(200, 72, 'startbt').setInteractive({
                    cursor: 'pointer'
                });
                this.settingsbutton = this.add.image(200, 230, 'settings').setInteractive({
                    cursor: 'pointer'
                });
                this.leaderbutton = this.add.image(1100, 72, 'leader').setInteractive({
                    cursor: 'pointer'
                });
                this.creditsbutton = this.add.image(1100, 230, 'credit').setInteractive({
                    cursor: 'pointer'
                });

                this.startbutton.on('pointerdown', function() {
                    this.scene.stop('start');
                    this.scene.start('levels');
                }, this);

                this.startbutton.on('pointerover', function() {
                    this.startbutton.setScale(1.2);
                }, this);

                this.startbutton.on('pointerout', function() {
                    this.startbutton.setScale(1);
                }, this);

                this.leaderbutton.on('pointerdown', function() {
                    this.scene.stop('start');
                    this.scene.start('titlesoon');
                }, this);

                this.settingsbutton.on('pointerdown', function() {
                    this.scene.stop('start');
                    this.scene.start('settings');
                }, this);

                this.settingsbutton.on('pointerover', function() {
                    this.settingsbutton.setScale(1.2);
                }, this);

                this.settingsbutton.on('pointerout', function() {
                    this.settingsbutton.setScale(1);
                }, this);

                this.leaderbutton.on('pointerover', function() {
                    this.leaderbutton.setScale(1.2);
                }, this);

                this.leaderbutton.on('pointerout', function() {
                    this.leaderbutton.setScale(1);
                }, this);

                this.creditsbutton.on('pointerdown', function() {
                    this.scene.stop('start');
                    this.scene.start('credits');
                }, this);

                this.creditsbutton.on('pointerover', function() {
                    this.creditsbutton.setScale(1.2);
                }, this);

                this.creditsbutton.on('pointerout', function(event) {
                    this.creditsbutton.setScale(1);
                }, this);

                this.player = this.physics.add.sprite(1280 / 2, 500, 'cube');
                this.player.rotation += 0.78;
                this.player.setGravityY(-300);
                this.player.setImmovable(true);
            },

            update: function() {
                if (this.player.y >= 470) {
                    this.player.setVelocityY(-100)
                } else if (this.player.y <= 420) {
                    this.player.setVelocityY(100)
                }
            }

        });

        var TutorialScene = new Phaser.Class({
            Extends: Phaser.Scene,

            initialize:

                function TutorialScene() {
                Phaser.Scene.call(this, {
                    key: 'tutorial'
                });
            },

            init: function() {

                this.breakplatforms = [];
                this.flyingWeapon = [];
                this.mplatforms = [];
                this.platforms;
                this.isOnGround = false;
                this.player;
                this.spike;
                this.turret;
                this.pillars;
                this.base;
                this.trophy;
                this.aggrox;
                this.aggroy;
                this.target;
                this.gameOver = false;
                this.gameWin = false;
                this.secondsDecimal = 0;
                this.minutes = 0;
                this.timer;
                this.timerEvent;
                this.jumps;
                this.bullet;
                this.bulletTimer;
                this.aiming;
                this.DjumpText;
                this.breakText;
                this.killText;
                this.spikeText;
                this.mPlatText;
                this.turretText;
                this.WjumpText;
                this.trophyText;
                this.pauseText;
                this.change;
                this.allowedToChange = true;
                this.esc;
                this.altControls;
                level = 'tutorial';
            },

            preload: function() {
                var progressbar = this.add.graphics();
                var percent = this.add.text(100, 430, '%', {
                    fontFamily: 'Minecraft',
                    fontSize: '32px',
                    fill: '#fff'
                });

                this.load.on('progress', function(value) {
                    progressbar.clear();
                    percent.setText(value.toFixed(2) * 100 + '%');
                    progressbar.fillStyle(0x355f76, 1);
                    progressbar.fillRect(100, 360, 1080 * value, 60);

                });

                this.load.on('complete', function() {

                    progressbar.destroy();
                    percent.destroy();

                });

                this.load.image('back', 'assets/testob/back.jpg');
                this.load.image('plat', 'assets/testob/plat.png');
                this.load.image('spike', 'assets/testob/spike.png');
                this.load.image('floor', 'assets/testob/floor.png');
                this.load.image('star', 'assets/testob/star.png');
                this.load.image('cube', 'assets/testob/cube1.png');
                this.load.image('death', 'assets/testob/cube3.png');
                this.load.image('pil', 'assets/testob/pil.png');
                this.load.image('tur', 'assets/testob/turret1.png');
                this.load.image('trophy', 'assets/testob/prize.png');
                this.load.image('base', 'assets/testob/base.png');
                this.load.image('dirt', 'assets/testob/dirt.png')
                this.load.image('circ', 'assets/testob/circle.png');
                this.load.image('bullet', 'assets/testob/bullet.png');
                this.load.image('axe', 'assets/testob/axe.png');
                this.load.image('grass', 'assets/testob/grass.png');
                this.load.audio('tutorialSound', 'assets/media/music/Kubbi - Up In My Jam.mp3');
            },

            create: function() {
                this.cameras.main.setBounds(0, 0, 1280 * 2, 720); //stops the camera from leaving the game area
                this.physics.world.setBounds(0, 0, 1280 * 2, 720); //sets the game area where physics is applied

                tutorialmusic = this.sound.add('tutorialSound');

                if (!tutorialmusicIsPlaying) {
                    tutorialmusicIsPlaying = true;
                    tutorialmusic.play({
                        mute: false,
                        volume: volumeLev,
                        loop: false
                    })
                }

                this.add.image(0, 0, 'back').setOrigin(0);
                this.add.image(1280, 0, 'back').setOrigin(0);
                this.add.image(1280 * 2, 0, 'back').setOrigin(0);

                this.flyingWeapon[0] = this.physics.add.sprite(850, 400, 'star').setCircle(20);
                this.flyingWeapon[0].body.setGravityY(-300); //sets gravity to negative of the world gravity so the object cannot be moved by gravity
                this.flyingWeapon[1] = this.physics.add.sprite(1400, 200, 'star').setCircle(20);
                this.flyingWeapon[1].body.setGravityY(-300);

                this.platforms = this.physics.add.staticGroup(); //creates a new group for this.platforms. They cannot move at all
                this.platforms.create(400, 590, 'plat').setScale(1, 0.7).refreshBody();

                this.mplatforms[0] = this.physics.add.sprite(1500, 500, 'plat').setScale(1, 0.7).refreshBody(); //creates a sprite for this.mplatforms[] This can move.
                this.mplatforms[0].body.setGravityY(-300);
                this.mplatforms[0].setImmovable(true); //the sprite can still move, but it cannot be moved by collision with other objects

                this.mplatforms[1] = this.physics.add.sprite(1100, 200, 'plat').setScale(1, 0.7).refreshBody(); //creates a sprite for this.mplatforms[] This can move.
                this.mplatforms[1].body.setGravityY(-300);
                this.mplatforms[1].setImmovable(true); //the sprite can still move, but it cannot be moved by collision with other objects

                this.breakplatforms[0] = this.physics.add.sprite(700, 300, 'plat').setScale(1, 0.4); //creates a sprite for this.mplatforms[] This can move.
                this.breakplatforms[0].body.setGravityY(-300);
                this.breakplatforms[0].setImmovable(true); //the sprite can still move, but it cannot be moved by collision with other objects

                this.spike = this.physics.add.staticGroup();
                for (var i = 0; i <= 450; i += 50) {
                    this.spike.create(700 + i, 635, 'spike');
                }

                this.pillars = this.physics.add.staticGroup();
                this.pillars.create(2100, 250, 'pil').setDisplaySize(100, 500).refreshBody();
                this.pillars.rotate(3.14);
                this.pillars.create(2400, 550, 'pil').setDisplaySize(100, 500).refreshBody();

                this.base = this.physics.add.sprite(1970, 365, 'base').setOrigin(0, 0.5);
                this.base.rotation = 1.57;
                this.base.setScale(1.25);
                this.base.body.setGravityY(-300);
                this.base.setImmovable(true);

                this.turret = this.physics.add.sprite(1972, 380, 'tur').setOrigin(0, 0.5);
                this.turret.body.setGravityY(-300);
                this.turret.setImmovable(true);

                this.bullet = this.physics.add.sprite(this.turret.x, this.turret.y, 'bullet');
                this.bullet.body.setGravityY(-300);
                this.bulletTimer = this.time.addEvent({
                    delay: 1500,
                    callback: this.shootBullet,
                    callbackScope: this,
                    loop: true
                })

                this.trophy = this.physics.add.sprite(2500, 50, 'trophy').setScale(0.3);
                this.trophy.setCollideWorldBounds(true); //prevents the object from falling through the world

                this.floor = this.physics.add.staticGroup();
                for (i = 32; i < 2560; i += 50) {
                    this.floor.create(0 + i, 688, 'grass').setScale(0.25).refreshBody();
                }
                this.floor.create(1965, 300, 'floor').setScale(0.5, 0.5).refreshBody();

                this.player = this.physics.add.sprite(100, 470, 'cube').setDisplaySize(48, 48);
                this.player.setBounce(0.1);
                this.player.setCollideWorldBounds(true);
                this.player.body.setGravityY(900);

                this.change = this.physics.add.sprite(100, 470, 'cube');
                this.change.setBounce(0.1);
                this.change.setCollideWorldBounds(true);
                this.change.body.setGravityY(-300);
                this.change.setSize(100, 50, true);
                this.change.setVisible(false);

                this.physics.add.collider(this.player, this.platforms);
                this.physics.add.collider(this.player, this.breakplatforms, this.break, null, this);
                this.physics.add.collider(this.player, this.floor); //checks to see if the objects collide
                this.physics.add.collider(this.player, this.mplatforms);
                this.physics.add.collider(this.player, this.pillars);
                this.physics.add.collider(this.floor, this.trophy);
                this.physics.add.collider(this.platforms, this.trophy);
                this.physics.add.collider(this.player, this.spike, this.hit, null, this); //checks to see if the objects collide, passes the objects to the function 'hit' if they do
                this.physics.add.collider(this.player, this.flyingWeapon, this.hit, null, this);
                this.physics.add.collider(this.player, this.bullet, this.hit, null, this);
                this.physics.add.collider(this.player, this.turret, this.hit, null, this);
                this.physics.add.overlap(this.player, this.trophy, this.win, null, this); //checks to see if the objects overlap, passes the objects to the function 'win' if they do
                this.physics.add.overlap(this.change, this.platforms, this.changeTest, null, this);
                this.physics.add.overlap(this.change, this.breakplatforms, this.changeTest, null, this);
                this.physics.add.overlap(this.change, this.mplatforms, this.changeTest, null, this);
                this.physics.add.overlap(this.change, this.pillars, this.changeTest, null, this);

                this.timerEvent = this.time.addEvent({
                    delay: 100,
                    callback: this.updateTime,
                    callbackScope: this,
                    loop: true
                })
                this.timer = this.add.text(16, 16, '0: 00', {
                    fontFamily: 'Minecraft',
                    fontSize: '32px',
                    fill: '#fff'
                });
                this.timer.scrollFactorX = 0;

                this.DjumpText = this.add.text(100, 190, 'Press ⇧ or W again to double jump', {
                    fontSize: '24px',
                    fontFamily: 'Minecraft',
                    fill: '#fff'
                });
                this.breakText = this.add.text(500, 150, 'Some platforms break', {
                    fontSize: '24px',
                    fontFamily: 'Minecraft',
                    fill: '#fff'
                });
                this.killText = this.add.text(850, 430, 'Scythes will kill you', {
                    fontSize: '24px',
                    fontFamily: 'Minecraft',
                    fill: '#fff'
                });
                this.spikeText = this.add.text(700, 595, 'Spikes will also kill you', {
                    fontSize: '24px',
                    fontFamily: 'Minecraft',
                    fill: '#fff'
                });
                this.mPlatText = this.add.text(1300, 430, 'Some platforms move', {
                    fontSize: '24px',
                    fontFamily: 'Minecraft',
                    fill: '#fff'
                });
                this.turretText = this.add.text(1700, 430, 'Turrets will shoot at you', {
                    fontSize: '24px',
                    fontFamily: 'Minecraft',
                    fill: '#fff'
                });
                this.WjumpText = this.add.text(1540, 190, 'Press ⇧ or W against a wall to wall jump', {
                    fontSize: '24px',
                    fontFamily: 'Minecraft',
                    fill: '#fff'
                });
                this.trophyText = this.add.text(2170, 190, 'Collect the trophy to win', {
                    fontSize: '24px',
                    fontFamily: 'Minecraft',
                    fill: '#fff'
                });
                this.pauseText = this.add.text(10, 50, 'Press ESC to pause', {
                    fontSize: '24px',
                    fontFamily: 'Minecraft',
                    fill: '#fff'
                });

                this.cursors = this.input.keyboard.createCursorKeys(); //creates inputs using the arrow keys
                this.altControls = this.input.keyboard.addKeys({
                    'up': Phaser.Input.Keyboard.KeyCodes.W,
                    'down': Phaser.Input.Keyboard.KeyCodes.S,
                    'left': Phaser.Input.Keyboard.KeyCodes.A,
                    'right': Phaser.Input.Keyboard.KeyCodes.D
                });
                this.esc = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.ESC); //sets up the escape button for input
                this.cameras.main.startFollow(this.player, true, 0.05, 0.05); //makes the camera track the player. increasing the numbers makes the camera track faster
            },

            update: function() {
                console.log(this.allowedToChange)
                this.aiming = false;
                this.groundCheck();

                this.controls();

                this.aggrox = Phaser.Math.Difference(this.turret.x, this.player.x); //finds the positive x distance between the player and turret
                this.aggroy = Phaser.Math.Difference(this.turret.y, this.player.y); //finds the positive y distance between the player and turret

                if (this.aggrox <= 450 && this.aggroy <= 350) {
                    this.target = Phaser.Math.Angle.BetweenPoints(this.turret, this.player); //finds the angle between the turret and player
                    if (this.target > 0.2 && this.target < 2.75) {
                        this.turret.rotation = this.target; // sets the turrets angle of rotation to the angle found above
                        this.aiming = true;
                    }
                }

                this.flyingWeapon[0].rotation += 0.2; //sets rotation and velocity of moving obstacles
                if (this.flyingWeapon[0].x > 849) {
                    this.flyingWeapon[0].setVelocityX(-150);
                } else if (this.flyingWeapon[0].x < 600) {
                    this.flyingWeapon[0].setVelocityX(150);
                }

                this.flyingWeapon[1].rotation += 0.2;
                if (this.flyingWeapon[1].y <= 200) {
                    this.flyingWeapon[1].setVelocityY(150);
                } else if (this.flyingWeapon[1].y > 400) {
                    this.flyingWeapon[1].setVelocityY(-150);
                }
                //end of moving obstacles

                if (this.mplatforms[0].x <= 1500) //sets velocity of moving platforms
                {
                    this.mplatforms[0].setVelocityX(150);
                } else if (this.mplatforms[0].x > 1860) {
                    this.mplatforms[0].setVelocityX(-150);
                }

                if (this.mplatforms[1].y <= 200) {
                    this.mplatforms[1].setVelocityY(150);
                } else if (this.mplatforms[1].y > 500) {
                    this.mplatforms[1].setVelocityY(-150);
                }
                //end of moving platforms

                if (this.gameOver) //true if player is hit by lethal object, determined by function 'hit'
                {
                    //starts the GameOver Scene after set amount of time
                    if (!autoRestart) {
                        this.time.addEvent({
                            delay: 1000,
                            loop: false,
                            callback: () => {
                                this.scene.stop(level);
                                this.scene.start('over');
                                /* setTimeout(() => {
                                    this.scene.stop('over')
                                    this.scene.start('start');
                                }, 2000)*/
                            }
                        })
                    } else if (autoRestart) {
                        this.time.addEvent({
                            delay: 250,
                            loop: false,
                            callback: () => {
                                this.scene.stop(level);
                                tutorialmusic.stop();
                                tutorialmusicIsPlaying = false;
                                this.scene.start(level);
                            }
                        })
                    }

                }

            },
            groundCheck: function() {
                if (this.player.body.touching.down) {
                    this.isOnGround = true;
                } else {
                    this.isOnGround = false;
                }

                if (this.player.body.touching.left || this.player.body.touching.right) {
                    this.jumps = 1;
                }

            },

            controls: function() {
                if (!this.gameWin) {
                    this.change.x = this.player.x;
                    this.change.y = this.player.y - 15;

                    if (Phaser.Input.Keyboard.JustDown(this.esc)) {
                        this.scene.pause();
                        this.scene.launch('pause')
                    }

                    if ((!this.cursors.up.isDown || !this.altControls.up.isDown) && this.isOnGround) {
                        this.jumps = 2;
                    }

                    if ((this.cursors.left.isDown && !this.cursors.right.isDown) || (this.altControls.left.isDown && !this.altControls.right.isDown)) {
                        this.player.setVelocityX(-350);
                    } else if ((!this.cursors.left.isDown && this.cursors.right.isDown) || (!this.altControls.left.isDown && this.altControls.right.isDown)) {
                        this.player.setVelocityX(350);
                    } else {
                        this.player.setVelocityX(0);
                    }

                    if ((this.cursors.down.isDown || this.altControls.down.isDown) && this.allowedToChange) //flattens player if down arrow is pressed
                    {
                        this.player.setDisplaySize(100, 25);
                    }

                    if ((Phaser.Input.Keyboard.JustDown(this.cursors.up) || Phaser.Input.Keyboard.JustDown(this.altControls.up)) && this.jumps > 0) {
                        if (!this.isOnGround) {
                            this.jumps = 1;
                        }

                        if (this.player.body.touching.left) {
                            this.player.setVelocityY(-630);
                            this.player.setVelocityX(350)
                        } else if (this.player.body.touching.right) {
                            this.player.setVelocityY(-630);
                            this.player.setVelocityX(-350);
                        } else {
                            this.player.setVelocityY(-630);
                        }

                        this.jumps--;
                        // up arrow must be pressed each time the player wants to jump

                        if (this.allowedToChange) {
                            this.player.setDisplaySize(48, 48);
                        }
                    }
                }
            },

            break: function(player, obst) {
                if (player.body.touching.down) {
                    this.time.addEvent({
                        delay: 750,
                        loop: false,
                        callback: () => {
                            obst.setVisible(false);
                            obst.body.enable = false;
                        }

                    })

                    this.time.addEvent({
                        delay: 2500,
                        loop: false,
                        callback: () => {
                            obst.setVisible(true);
                            obst.body.enable = true;
                        }

                    })
                }

            },

            changeTest: function() {
                this.allowedToChange = false;

                this.time.addEvent({
                    delay: 500,
                    loop: false,
                    callback: () => {
                        this.allowedToChange = true;
                    }

                })
            },

            shootBullet: function() {
                if (this.aiming) {
                    this.physics.velocityFromRotation(this.turret.rotation, 350, this.bullet.body.velocity);
                    this.bullet.x = this.turret.x;
                    this.bullet.y = this.turret.y;
                    this.bullet.body.setGravityY(-300);
                }

            },

            hit: function(player, obst) {
                this.physics.pause();
                player.setTexture('death').setScale(0.4);
                this.gameOver = true;
            },

            win: function(player, obj) {
                console.log('Good job'); //tells you good job for winning because i don't have a win screen yet


                if (this.isOnGround == true) {
                    level = 'level1';
                    obj.disableBody(true, true);
                    this.player.setVelocityX(0); //U cud also use this but
                    this.input.disable = true //input disable makes the player not be able to do anything whatsoever
                    this.player.setCollideWorldBounds(false);
                    setTimeout(() => {
                        this.player.setVelocityX(500);
                        console.log('true')

                        this.time.addEvent({
                            delay: 500,
                            loop: false,
                            callback: () => {
                                this.physics.pause();
                            }

                        })

                        this.time.addEvent({
                            delay: 500,
                            loop: false,
                            callback: () => {
                                this.scene.stop('tutorial');
                                this.scene.start('win');
                            }

                        })

                    }, 1000);

                }

                this.gameWin = true;

            },

            updateTime: function() {
                this.secondsDecimal++;
                if (this.secondsDecimal === 599) {
                    this.secondsDecimal = 0;
                    this.minutes++;
                }

                if (this.gameWin || this.gameOver) {
                    this.timerEvent.remove(false);
                    //some php for leader board
                }

                this.timer.setText('0' + this.minutes + ':' + this.secondsDecimal / 10);
            }

        });


        var Level1Scene = new Phaser.Class({
            Extends: Phaser.Scene,

            initialize:

                function Level1Scene() {
                Phaser.Scene.call(this, {
                    key: 'level1'
                });
            },
            init: function() {
                this.j = 1;
                this.breakplatforms = [];
                this.flyingWeapon = [];
                this.mplatforms = [];
                this.platforms;
                this.isOnGround = false;
                this.player;
                this.spike;
                this.turret;
                this.pillars;
                this.base;
                this.trophy;
                this.aggrox;
                this.aggroy;
                this.target;
                this.gameOver = false;
                this.gameWin = false;
                this.secondsDecimal = 0;
                this.minutes = 0;
                this.timer;
                this.timerEvent;
                this.jumps;
                this.bullet;
                this.bulletTimer;
                this.aiming;
                this.axe;
                this.axeIsThrown = false;
                this.axePower = false;
                this.axeTimer;
                this.axeAngle;
                this.aimer;
                this.turretActive = true;
                this.axeOverlap;
                this.change;
                this.allowedToChange = true;
                this.esc;
                this.altControls;
                level = 'level1';
            },

            preload: function() {
                var progressbar = this.add.graphics();
                var percent = this.add.text(100, 430, '%', {
                    fontFamily: 'Minecraft',
                    fontSize: '32px',
                    fill: '#fff'
                });

                this.load.on('progress', function(value) {
                    progressbar.clear();
                    percent.setText(value.toFixed(2) * 100 + '%');
                    progressbar.fillStyle(0x355f76, 1);
                    progressbar.fillRect(100, 360, 1080 * value, 60);

                });

                this.load.on('complete', function() {

                    progressbar.destroy();
                    percent.destroy();

                });

                this.load.image('back', 'assets/testob/back.jpg');
                this.load.image('plat', 'assets/testob/plat.png');
                this.load.image('spike', 'assets/testob/spike.png');
                this.load.image('floor', 'assets/testob/floor.png');
                this.load.image('star', 'assets/testob/star.png');
                this.load.image('cube', 'assets/testob/cube1.png');
                this.load.image('death', 'assets/testob/cube3.png');
                this.load.image('pil', 'assets/testob/pil.png');
                this.load.image('tur', 'assets/testob/turret1.png');
                this.load.image('trophy', 'assets/testob/prize.png');
                this.load.image('base', 'assets/testob/base.png');
                this.load.image('dirt', 'assets/testob/dirt.png')
                this.load.image('circ', 'assets/testob/circle.png');
                this.load.image('bullet', 'assets/testob/bullet.png');
                this.load.image('axe', 'assets/testob/axe.png');
                this.load.image('arrow', 'assets/testob/arrow.png');
                this.load.image('grass', 'assets/testob/grass.png');
                this.load.audio('level1Sound', 'assets/media/music/Joshua McLean - Mountain Trials.mp3');
            },

            create: function() {
                this.cameras.main.setBounds(0, 0, 1280 * 4, 720); //stops the camera from leaving the game area
                this.physics.world.setBounds(0, 0, 1280 * 4, 720); //sets the game area where physics is applied

                music1 = this.sound.add('level1Sound');

                if (!music1IsPlaying) {
                    music1IsPlaying = true;
                    music1.play({
                        mute: false,
                        volume: volumeLev,
                        loop: true
                    })
                }

                this.add.image(0, 0, 'back').setOrigin(0);
                this.add.image(1280, 0, 'back').setOrigin(0);
                this.add.image(1280 * 2, 0, 'back').setOrigin(0);
                this.add.image(1280 * 3, 0, 'back').setOrigin(0);
                this.add.image(1280 * 4, 0, 'back').setOrigin(0);

                this.flyingWeapon[0] = this.physics.add.sprite(3900, 450, 'star').setCircle(20);
                this.flyingWeapon[0].body.setGravityY(-300); //sets gravity to negative of the world gravity so the object cannot be moved by gravity
                this.flyingWeapon[1] = this.physics.add.sprite(1200, 200, 'star').setCircle(20);
                this.flyingWeapon[1].body.setGravityY(-300);
                this.flyingWeapon[2] = this.physics.add.sprite(4500, 200, 'star').setCircle(20);
                this.flyingWeapon[2].body.setGravityY(-300);

                this.platforms = this.physics.add.staticGroup(); //creates a new group for this.platforms. They cannot move at all
                this.platforms.create(100, 550, 'plat').setScale(1, 0.7).refreshBody();
                this.platforms.create(5000, 150, 'plat').setScale(1, 0.7).refreshBody();

                this.mplatforms[0] = this.physics.add.sprite(3600, 500, 'plat').setScale(1, 0.7).refreshBody(); //creates a sprite for this.mplatforms[] This can move.
                this.mplatforms[0].body.setGravityY(-300);
                this.mplatforms[0].setImmovable(true); //the sprite can still move, but it cannot be moved by collision with other objects

                this.mplatforms[1] = this.physics.add.sprite(4700, 200, 'plat').setScale(1, 0.7).refreshBody(); //creates a sprite for this.mplatforms[] This can move.
                this.mplatforms[1].body.setGravityY(-300);
                this.mplatforms[1].setImmovable(true); //the sprite can still move, but it cannot be moved by collision with other objects

                this.spike = this.physics.add.staticGroup();

                this.spike.create(2973, 200, 'spike');
                this.spike.rotate(3.14);

                this.spike.create(3127, 350, 'spike');
                this.spike.rotate(-3.14 / 2);

                for (var i = 0; i <= 3000; i += 150) {
                    this.spike.create(0 + i, 635, 'spike');
                }

                for (var i = 3400; i <= 5150; i += 50) {
                    this.spike.create(0 + i, 635, 'spike');
                }

                this.breakplatforms[0] = this.physics.add.sprite(4350, 450, 'plat').setScale(1, 0.4);
                this.breakplatforms[0].body.setGravityY(-300);
                this.breakplatforms[0].setImmovable(true);

                for (i = 600; i < 3100; i += 500) {
                    this.breakplatforms[this.j] = this.physics.add.sprite(0 + i, 450, 'plat').setScale(1, 0.4);
                    this.breakplatforms[this.j].body.setGravityY(-300);
                    this.breakplatforms[this.j].setImmovable(true);
                    this.spike.create(0 + i, 415, 'spike');
                    this.j++;
                }

                this.pillars = this.physics.add.staticGroup();
                this.pillars.create(2900, 150, 'pil').setDisplaySize(100, 500).refreshBody();
                this.pillars.rotate(3.14);
                this.pillars.create(3200, 425, 'pil').setDisplaySize(100, 400).refreshBody();

                this.base = this.physics.add.sprite(1970, 115, 'base').setOrigin(0, 0.5);
                this.base.rotation = 1.57;
                this.base.setScale(1.25);
                this.base.body.setGravityY(-300);
                this.base.setImmovable(true);

                this.turret = this.physics.add.sprite(1972, 130, 'tur').setOrigin(0, 0.5);
                this.turret.body.setGravityY(-300);
                this.turret.setImmovable(true);

                this.bullet = this.physics.add.sprite(this.turret.x, this.turret.y, 'bullet');
                this.bullet.body.setGravityY(-300);
                this.bulletTimer = this.time.addEvent({
                    delay: 1750,
                    callback: this.shootBullet,
                    callbackScope: this,
                    loop: true
                })

                this.trophy = this.physics.add.sprite(5100, 50, 'trophy').setScale(0.3);
                this.trophy.setCollideWorldBounds(true); //prevents the object from falling through the world

                this.floor = this.physics.add.staticGroup();
                for (i = 32; i < 5150; i += 50) {
                    this.floor.create(0 + i, 688, 'grass').setScale(0.25).refreshBody();
                }
                this.floor.create(1965, 50, 'floor').setScale(0.5, 0.5).refreshBody();

                this.axe = this.physics.add.sprite(200, 470, 'axe');
                this.axe.setCollideWorldBounds(true);
                this.axe.body.setGravityY(-300);
                this.axe.body.onWorldBounds = true;
                this.physics.world.on('worldbounds', this.axeWorldBounds);

                this.aimer = this.add.image(this.axe.x, this.axe.y, 'arrow').setOrigin(0, 0.5);
                this.aimer.setVisible(false);

                this.player = this.physics.add.sprite(100, 470, 'cube').setDisplaySize(48, 48);
                this.player.setBounce(0.1);
                this.player.setCollideWorldBounds(true);
                this.player.body.setGravityY(900);

                this.change = this.physics.add.sprite(100, 470, 'cube');
                this.change.setBounce(0.1);
                this.change.setCollideWorldBounds(true);
                this.change.body.setGravityY(-300);
                this.change.setSize(100, 50, true);
                this.change.setVisible(false);

                this.physics.add.collider(this.axe, this.platforms, this.axeStop, null, this);
                this.physics.add.collider(this.axe, this.mplatforms, this.axeStop, null, this);
                this.physics.add.collider(this.axe, this.floor, this.axeStop, null, this);
                this.physics.add.collider(this.axe, this.pillars, this.axeStop, null, this);
                this.physics.add.collider(this.axe, this.breakplatforms, this.axeStop, null, this);
                this.axeOverlap = this.physics.add.overlap(this.player, this.axe, this.pickup, null, this);
                this.physics.add.overlap(this.axe, this.flyingWeapon, this.axeDestroy, null, this);
                this.physics.add.overlap(this.axe, this.turret, this.turretDestroy, null, this);
                this.physics.add.overlap(this.axe, this.spike, this.axeDestroy, null, this);
                this.physics.add.collider(this.player, this.platforms);
                this.physics.add.collider(this.player, this.breakplatforms, this.break, null, this);
                this.physics.add.collider(this.player, this.floor); //checks to see if the objects collide
                this.physics.add.collider(this.player, this.mplatforms);
                this.physics.add.collider(this.player, this.pillars);
                this.physics.add.collider(this.floor, this.trophy);
                this.physics.add.collider(this.platforms, this.trophy);
                this.physics.add.collider(this.player, this.spike, this.hit, null, this); //checks to see if the objects collide, passes the objects to the function 'hit' if they do
                this.physics.add.collider(this.player, this.flyingWeapon, this.hit, null, this);
                this.physics.add.collider(this.player, this.bullet, this.hit, null, this);
                this.physics.add.collider(this.player, this.turret, this.hit, null, this);
                this.physics.add.overlap(this.player, this.trophy, this.win, null, this); //checks to see if the objects overlap, passes the objects to the function 'win' if they do
                this.physics.add.overlap(this.change, this.platforms, this.changeTest, null, this);
                this.physics.add.overlap(this.change, this.breakplatforms, this.changeTest, null, this);
                this.physics.add.overlap(this.change, this.mplatforms, this.changeTest, null, this);
                this.physics.add.overlap(this.change, this.pillars, this.changeTest, null, this);

                this.timerEvent = this.time.addEvent({
                    delay: 100,
                    callback: this.updateTime,
                    callbackScope: this,
                    loop: true
                })
                this.timer = this.add.text(16, 16, '0: 00', {
                    fontFamily: 'Minecraft',
                    fontSize: '32px',
                    fill: '#fff'
                });
                this.timer.scrollFactorX = 0;

                this.cursors = this.input.keyboard.createCursorKeys(); //creates inputs using the arrow keys
                this.altControls = this.input.keyboard.addKeys({
                    'up': Phaser.Input.Keyboard.KeyCodes.W,
                    'down': Phaser.Input.Keyboard.KeyCodes.S,
                    'left': Phaser.Input.Keyboard.KeyCodes.A,
                    'right': Phaser.Input.Keyboard.KeyCodes.D
                });
                this.esc = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.ESC); //sets up the escape button for input
                this.cameras.main.startFollow(this.player, true, 0.05, 0.05); //makes the camera track the player. increasing the numbers makes the camera track faster
            },

            update: function() {
                this.aiming = false;
                this.groundCheck();

                this.controls();

                this.aggrox = Phaser.Math.Difference(this.turret.x, this.player.x); //finds the positive x distance between the player and turret
                this.aggroy = Phaser.Math.Difference(this.turret.y, this.player.y); //finds the positive y distance between the player and turret

                if (this.turretActive) {
                    if (this.aggrox <= 650 && this.aggroy <= 550) {
                        this.target = Phaser.Math.Angle.BetweenPoints(this.turret, this.player); //finds the angle between the turret and player
                        if (this.target > 0 && this.target < 3) {
                            this.turret.rotation = this.target; // sets the turrets angle of rotation to the angle found above
                            this.aiming = true;
                        }
                    }
                }

                this.flyingWeapon[0].rotation += 0.2; //sets rotation and velocity of moving obstacles
                if (this.flyingWeapon[0].x > 3899) {
                    this.flyingWeapon[0].setVelocityX(-200);
                } else if (this.flyingWeapon[0].x < 3650) {
                    this.flyingWeapon[0].setVelocityX(200);
                }

                this.flyingWeapon[1].rotation += 0.2;
                if (this.flyingWeapon[1].y <= 200) {
                    this.flyingWeapon[1].setVelocityY(150);
                } else if (this.flyingWeapon[1].y > 400) {
                    this.flyingWeapon[1].setVelocityY(-150);
                }

                this.flyingWeapon[2].rotation += 0.2;
                if (this.flyingWeapon[2].y <= 200) {
                    this.flyingWeapon[2].setVelocityY(150);
                } else if (this.flyingWeapon[2].y > 350) {
                    this.flyingWeapon[2].setVelocityY(-150);
                }
                //end of moving obstacles

                if (this.mplatforms[0].x <= 3600) //sets velocity of moving platforms
                {
                    this.mplatforms[0].setVelocityX(150);
                } else if (this.mplatforms[0].x > 4000) {
                    this.mplatforms[0].setVelocityX(-150);
                }

                if (this.mplatforms[1].y <= 200) {
                    this.mplatforms[1].setVelocityY(150);
                } else if (this.mplatforms[1].y > 500) {
                    this.mplatforms[1].setVelocityY(-150);
                }
                //end of moving platforms

                if (this.gameOver) //true if player is hit by lethal object, determined by function 'hit'
                {
                    //starts the GameOver Scene after set amount of time
                    if (!autoRestart) {
                        this.time.addEvent({
                            delay: 1000,
                            loop: false,
                            callback: () => {
                                this.scene.stop(level);
                                this.scene.start('over');
                                /* setTimeout(() => {
                                    this.scene.stop('over')
                                    this.scene.start('start');
                                }, 2000)*/
                            }
                        })
                    } else if (autoRestart) {
                        this.time.addEvent({
                            delay: 250,
                            loop: false,
                            callback: () => {
                                this.scene.stop(level);
                                music1.stop();
                                music1IsPlaying = false;
                                this.scene.start(level);
                            }
                        })
                    }

                }

                if (this.axeIsThrown) {
                    this.axe.rotation += 0.2;
                }

            },
            groundCheck: function() {
                if (this.player.body.touching.down) {
                    this.isOnGround = true;
                } else {
                    this.isOnGround = false;
                }

                if (this.player.body.touching.left || this.player.body.touching.right) {
                    this.jumps = 1;
                }

            },

            controls: function() {
                if (!this.gameWin) {
                    this.change.x = this.player.x;
                    this.change.y = this.player.y - 15;

                    if (Phaser.Input.Keyboard.JustDown(this.esc)) {
                        this.scene.pause();
                        this.scene.launch('pause')
                    }

                    if ((!this.cursors.up.isDown || !this.altControls.up.isDown) && this.isOnGround) {
                        this.jumps = 2;
                    }

                    if ((this.cursors.left.isDown && !this.cursors.right.isDown) || (this.altControls.left.isDown && !this.altControls.right.isDown)) {
                        this.player.setVelocityX(-350);
                    } else if ((!this.cursors.left.isDown && this.cursors.right.isDown) || (!this.altControls.left.isDown && this.altControls.right.isDown)) {
                        this.player.setVelocityX(350);
                    } else {
                        this.player.setVelocityX(0);
                    }

                    if ((this.cursors.down.isDown || this.altControls.down.isDown) && this.allowedToChange) //flattens player if down arrow is pressed
                    {
                        this.player.setDisplaySize(100, 25);
                    }

                    if ((Phaser.Input.Keyboard.JustDown(this.cursors.up) || Phaser.Input.Keyboard.JustDown(this.altControls.up)) && this.jumps > 0) {
                        if (!this.isOnGround) {
                            this.jumps = 1;
                        }

                        if (this.player.body.touching.left) {
                            this.player.setVelocityY(-630);
                            this.player.setVelocityX(350)
                        } else if (this.player.body.touching.right) {
                            this.player.setVelocityY(-630);
                            this.player.setVelocityX(-350);
                        } else {
                            this.player.setVelocityY(-630);
                        }

                        this.jumps--;
                        // up arrow must be pressed each time the player wants to jump

                        if (this.allowedToChange) {
                            this.player.setDisplaySize(48, 48);
                        }
                    }
                }
                console.log(this.axePower)
                if (this.axePower) {
                    this.axe.rotation = 0;
                    this.axeIsThrown = false;
                    this.axe.x = this.player.x + 50;
                    this.axe.y = this.player.y - 55;
                    this.aimer.x = this.axe.x;
                    this.aimer.y = this.axe.y;

                    this.input.on('pointermove', function(pointer) {
                        this.axeAngle = Phaser.Math.Angle.Between(this.axe.x, this.axe.y, pointer.worldX, pointer.worldY);
                        this.aimer.rotation = this.axeAngle;
                    }, this);

                    this.input.on('pointerdown', function(pointer) {
                        this.aimer.setVisible(false);
                        this.axePower = false;
                        this.axeIsThrown = true;
                        this.axe.rotation += 0.2;
                        this.axeTimer = this.time.addEvent({
                            delay: 10000,
                            callback: this.axeDown,
                            callbackScope: this,
                            loop: false
                        });
                        this.physics.velocityFromRotation(this.aimer.rotation, 450, this.axe.body.velocity);
                    }, this);
                }


            },

            axeWorldBounds: function(axe) {
                axe.gameObject.destroy();
            },

            axeStop: function(axe, obst) {
                axe.setVelocity(0);
                this.axeIsThrown = false;
                this.axeOverlap.active = true;
            },

            axeDestroy: function(axe, obst) {
                axe.destroy();
                obst.destroy();
                this.aimer.destroy();
            },

            turretDestroy: function(axe, obst) {
                this.bullet.destroy();
                axe.destroy();
                obst.destroy();
                this.aimer.destroy();
                this.turretActive = false;
            },

            pickup: function(player, obst) {
                this.axePower = true;
                this.aimer.setVisible(true);
                this.axeOverlap.active = false;
            },

            axeDown: function() {
                this.axePower = false;
                this.aimer.destroy();
                this.axe.destroy();
            },

            break: function(player, obst) {
                if (player.body.touching.down) {
                    this.time.addEvent({
                        delay: 750,
                        loop: false,
                        callback: () => {
                            obst.setVisible(false);
                            obst.body.enable = false;
                        }

                    })

                    this.time.addEvent({
                        delay: 2500,
                        loop: false,
                        callback: () => {
                            obst.setVisible(true);
                            obst.body.enable = true;
                        }

                    })
                }

            },

            changeTest: function() {
                this.allowedToChange = false;

                this.time.addEvent({
                    delay: 500,
                    loop: false,
                    callback: () => {
                        this.allowedToChange = true;
                    }

                })
            },

            shootBullet: function() {
                if (this.aiming) {
                    this.physics.velocityFromRotation(this.turret.rotation, 400, this.bullet.body.velocity);
                    this.bullet.x = this.turret.x;
                    this.bullet.y = this.turret.y;
                    this.bullet.body.setGravityY(-300);
                }

            },

            hit: function(player, obst) {
                this.physics.pause();
                player.setTexture('death').setScale(0.4);
                this.gameOver = true;
            },

            win: function(player, obj) {
                console.log('Good job'); //tells you good job for winning because i don't have a win screen yet


                if (this.isOnGround == true) {
                    level = 'level2';
                    obj.disableBody(true, true);
                    this.player.setVelocityX(0); //U cud also use this but
                    this.input.disable = true //input disable makes the player not be able to do anything whatsoever
                    this.player.setCollideWorldBounds(false);
                    setTimeout(() => {
                        this.player.setVelocityX(500);
                        console.log('true')

                        this.time.addEvent({
                            delay: 500,
                            loop: false,
                            callback: () => {
                                this.physics.pause();
                            }

                        })

                        this.time.addEvent({
                            delay: 500,
                            loop: false,
                            callback: () => {
                                this.scene.stop('tutorial');
                                this.scene.start('win');
                            }

                        })

                    }, 1000);

                }

                this.gameWin = true;

            },

            updateTime: function() {
                this.secondsDecimal++;
                if (this.secondsDecimal === 599) {
                    this.secondsDecimal = 0;
                    this.minutes++;
                }

                if (this.gameWin || this.gameOver) {
                    this.timerEvent.remove(false);
                    //some php for leader board
                }

                this.timer.setText('0' + this.minutes + ':' + this.secondsDecimal / 10);
            }

        });

        var GameOverScene = new Phaser.Class({

            Extends: Phaser.Scene,

            initialize:

                function GameOverScene() {
                Phaser.Scene.call(this, {
                    key: 'over'
                });
            },

            init: function() {
                this.retrybt;
                this.nextbt;
                this.menubutton;
            },

            preload: function() {
                this.load.image('die', 'assets/testob/die.png');
                this.load.image('retry', 'assets/testob/playagain.png');
                this.load.image('next', 'assets/testob/nextlevel.png');
                this.load.audio('dead', 'assets/media/music/mixkit-player-losing-or-failing-2042.wav');
            },

            create: function() {
                if (tutorialmusicIsPlaying) {
                    tutorialmusicIsPlaying = false;
                    tutorialmusic.stop();
                }

                if (music1IsPlaying) {
                    music1IsPlaying = false;
                    music1.stop();
                }

                deathSound = this.sound.add('dead');
                deathSound.play({
                    mute: false,
                    volume: volumeLev,
                    loop: false
                });

                this.cameras.main.fadeIn(3000);
                this.add.image(0, 0, 'die').setOrigin(0); //End screen

                this.retrybt = this.add.image(250, 600, 'retry').setInteractive({
                    cursor: 'pointer'
                });
                this.retrybt.on('pointerdown', function() {
                    this.scene.stop('over');
                    this.scene.start(level);
                }, this);

                this.retrybt.on('pointerover', function() {
                    this.retrybt.setScale(1.2);
                }, this);

                this.retrybt.on('pointerout', function() {
                    this.retrybt.setScale(1);
                }, this);

                this.nextbt = this.add.image(650, 600, 'select').setInteractive({
                    cursor: 'pointer'
                });
                this.nextbt.on('pointerdown', function() {
                    this.scene.stop('over');
                    this.scene.start('levels');
                }, this);

                this.nextbt.on('pointerover', function() {
                    this.nextbt.setScale(1.2);
                }, this);

                this.nextbt.on('pointerout', function() {
                    this.nextbt.setScale(1);
                }, this);

                this.menubutton = this.add.image(1050, 600, 'menu').setInteractive({
                    cursor: 'pointer'
                });
                this.menubutton.on('pointerdown', function() {
                    this.scene.stop('over');
                    this.scene.start('start');
                }, this);

                this.menubutton.on('pointerover', function() {
                    this.menubutton.setScale(1.2);
                }, this);

                this.menubutton.on('pointerout', function() {
                    this.menubutton.setScale(1);
                }, this);
            },

            update: function() {

            }

        });

        var GameWinScene = new Phaser.Class({

            Extends: Phaser.Scene,

            initialize:

                function GameWinScene() {
                Phaser.Scene.call(this, {
                    key: 'win'
                });
            },

            init: function() {
                this.retrybt;
                this.nextbt;
                this.menubutton;
            },

            preload: function() {
                this.load.image('winner', 'assets/testob/win.png');
                this.load.image('retry', 'assets/testob/playagain.png');
                this.load.image('next', 'assets/testob/nextlevel.png');
                this.load.image('menu', 'assets/testob/returnmenu.png');
                this.load.audio('winner', 'assets/media/music/mixkit-completion-of-a-level-2063.wav');
            },

            create: function() {
                if (tutorialmusicIsPlaying) {
                    tutorialmusicIsPlaying = false;
                    tutorialmusic.stop();
                }

                if (music1IsPlaying) {
                    music1IsPlaying = false;
                    music1.stop();
                }

                winSound = this.sound.add('winner');
                winSound.play({
                    mute: false,
                    volume: volumeLev,
                    loop: false
                });

                this.cameras.main.fadeIn(3000);
                this.add.image(0, 0, 'winner').setOrigin(0); //End screen

                this.retrybt = this.add.image(250, 600, 'retry').setInteractive({
                    cursor: 'pointer'
                });
                this.retrybt.on('pointerdown', function() {
                    this.scene.stop('win');
                    this.scene.start(level);
                }, this);

                this.retrybt.on('pointerover', function() {
                    this.retrybt.setScale(1.2);
                }, this);

                this.retrybt.on('pointerout', function() {
                    this.retrybt.setScale(1);
                }, this);

                this.nextbt = this.add.image(650, 600, 'next').setInteractive({
                    cursor: 'pointer'
                });
                this.nextbt.on('pointerdown', function() {
                    this.scene.stop('win');
                    if (level === 'tutorial' || level === 'level1') {
                        this.scene.start(level);
                    } else {
                        this.scene.start('soon');
                    }

                }, this);

                this.nextbt.on('pointerover', function() {
                    this.nextbt.setScale(1.2);
                }, this);

                this.nextbt.on('pointerout', function() {
                    this.nextbt.setScale(1);
                }, this);

                this.menubutton = this.add.image(1050, 600, 'menu').setInteractive({
                    cursor: 'pointer'
                });
                this.menubutton.on('pointerdown', function() {
                    this.scene.stop('win');
                    this.scene.start('start');
                }, this);

                this.menubutton.on('pointerover', function() {
                    this.menubutton.setScale(1.2);
                }, this);

                this.menubutton.on('pointerout', function() {
                    this.menubutton.setScale(1);
                }, this);
            },

            update: function() {

            }

        });

        var LevelSelectScene = new Phaser.Class({

            Extends: Phaser.Scene,

            initialize:

                function LevelSelectScene() {
                Phaser.Scene.call(this, {
                    key: 'levels'
                });
            },

            init: function() {
                this.tutorialbt;
                this.menubt;
                this.level1bt;
                this.level2bt;
                this.level3bt;
                this.player;
            },

            preload: function() {
                var progressbar = this.add.graphics();
                var percent = this.add.text(100, 430, '%', {
                    fontFamily: 'Minecraft',
                    fontSize: '32px',
                    fill: '#fff'
                });

                this.load.on('progress', function(value) {
                    progressbar.clear();
                    percent.setText(value.toFixed(2) * 100 + '%');
                    progressbar.fillStyle(0x355f76, 1);
                    progressbar.fillRect(100, 360, 1080 * value, 60);

                });

                this.load.on('complete', function() {

                    progressbar.destroy();
                    percent.destroy();

                });

                this.load.image('menuback', 'assets/testob/menuback.png');
                this.load.image('tutorial', 'assets/testob/tutorial.png');
                this.load.image('level1', 'assets/testob/level1.png');
                this.load.image('level2', 'assets/testob/level2.png');
                this.load.image('level3', 'assets/testob/level3.png');
                this.load.image('menu', 'assets/testob/returnmenu.png');
                this.load.image('cube', 'assets/testob/cube1.png');
            },

            create: function() {
                this.add.image(0, 0, 'menuback').setOrigin(0);
                this.menubt = this.add.image(1280 / 2, 650, 'menu').setInteractive({
                    cursor: 'pointer'
                });
                this.tutorialbt = this.add.image(200, 72, 'tutorial').setInteractive({
                    cursor: 'pointer'
                });
                this.level1bt = this.add.image(200, 230, 'level1').setInteractive({
                    cursor: 'pointer'
                });
                this.level2bt = this.add.image(1100, 72, 'level2').setInteractive({
                    cursor: 'pointer'
                });
                this.level3bt = this.add.image(1100, 230, 'level3').setInteractive({
                    cursor: 'pointer'
                });

                if (!bgmusicIsPlaying) {
                    bgmusicIsPlaying = true;
                    bgmusic.play({
                        loop: false
                    });
                }

                this.menubt.on('pointerdown', function() {
                    if (tutorialmusicIsPlaying) {
                        tutorialmusicIsPlaying = false;
                        tutorialmusic.stop();
                    }

                    if (music1IsPlaying) {
                        music1IsPlaying = false;
                        music1.stop();
                    }
                    if (bgmusicIsPlaying) {
                        bgmusic.stop();
                        bgmusicIsPlaying = false;
                    }
                    this.scene.stop('credits');
                    this.scene.start('start');
                }, this);

                this.menubt.on('pointerover', function() {
                    this.menubt.setScale(1.2);
                }, this);

                this.menubt.on('pointerout', function(event) {
                    this.menubt.setScale(1);
                }, this);

                this.tutorialbt.on('pointerdown', function() {

                    if (showControls) {
                        this.scene.stop('levels');
                        this.scene.start('controls');
                    } else if (!showControls) {

                        if (bgmusicIsPlaying) {
                            bgmusic.stop();
                            bgmusicIsPlaying = false;
                        }
                        this.scene.stop('levels');
                        this.scene.start('tutorial');
                    }

                }, this);

                this.tutorialbt.on('pointerover', function() {
                    this.tutorialbt.setScale(1.2);
                }, this);

                this.tutorialbt.on('pointerout', function() {
                    this.tutorialbt.setScale(1);
                }, this);

                this.level1bt.on('pointerdown', function() {
                    if (bgmusicIsPlaying) {
                        bgmusic.stop();
                        bgmusicIsPlaying = false;
                    }
                    this.scene.stop('levels');
                    this.scene.start('level1');
                }, this);

                this.level1bt.on('pointerover', function() {
                    this.level1bt.setScale(1.2);
                }, this);

                this.level1bt.on('pointerout', function() {
                    this.level1bt.setScale(1);
                }, this);

                this.level2bt.on('pointerdown', function() {
                    this.scene.stop('levels');
                    this.scene.start('lvlsoon');
                }, this);

                this.level2bt.on('pointerover', function() {
                    this.level2bt.setScale(1.2);
                }, this);

                this.level2bt.on('pointerout', function(event) {
                    this.level2bt.setScale(1);
                }, this);

                this.level3bt.on('pointerdown', function() {
                    this.scene.stop('levels');
                    this.scene.start('lvlsoon');
                }, this);

                this.level3bt.on('pointerover', function() {
                    this.level3bt.setScale(1.2);
                }, this);

                this.level3bt.on('pointerout', function(event) {
                    this.level3bt.setScale(1);
                }, this);
                this.player = this.physics.add.sprite(1280 / 2, 500, 'cube');
                this.player.rotation += 0.78;
                this.player.setGravityY(-300);
                this.player.setImmovable(true);
            },

            update: function() {
                if (this.player.y >= 500) {
                    this.player.setVelocityY(-100)
                } else if (this.player.y <= 420) {
                    this.player.setVelocityY(100)
                }
            }

        });

        var PauseScene = new Phaser.Class({

            Extends: Phaser.Scene,

            initialize:

                function PauseScene() {
                Phaser.Scene.call(this, {
                    key: 'pause'
                });
            },

            init: function() //called everytime the scene restarts. I use it to declare variables, 'this' is used so that the scope of the variables is only within this scene.
                {
                    this.autoRestartbt;
                    this.returnbt;
                    this.levelbt;
                    this.menubt;
                    this.restartbt;
                    this.mutebt;
                    this.volumePlus;
                    this.volumeMinus;
                    this.volumebt;
                    this.muted;
                },

            preload: function() {
                this.load.image('gameReturn', 'assets/testob/returngame.png');
                this.load.image('gameRestart', 'assets/testob/gamerestart.png');
                this.load.image('menuReturn', 'assets/testob/returnmenu.png');
                this.load.image('levelSelect', 'assets/testob/nextlevel.png');
                this.load.image('menuback2', 'assets/testob/menuback2.png');
            },

            create: function() {
                this.add.image(0, 0, 'menuback2').setOrigin(0);

                this.mutebt = this.add.text(16, 16, '', {
                    fontFamily: 'Minecraft',
                    fontSize: '32px',
                    fill: '#fff'
                }).setInteractive({
                    cursor: 'pointer'
                });

                this.volumebt = this.add.text(16, 46, 'Volume: ' + trueVolumeLev, {
                    fontSize: '32px',
                    fontFamily: 'Minecraft',
                    fill: '#fff'
                }).setInteractive({
                    cursor: 'pointer'
                });

                this.volumePlus = this.add.text(16, 76, '+', {
                    fontSize: '32px',
                    fontFamily: 'Minecraft',
                    fill: '#fff'
                }).setInteractive({
                    cursor: 'pointer'
                });

                this.volumeMinus = this.add.text(36, 76, '-', {
                    fontSize: '32px',
                    fontFamily: 'Minecraft',
                    fill: '#fff'
                }).setInteractive({
                    cursor: 'pointer'
                });

                this.autoRestartbt = this.add.text(16, 136, '', {
                    fontSize: '32px',
                    fontFamily: 'Minecraft',
                    fill: '#fff'
                }).setInteractive({
                    cursor: 'pointer'
                });

                this.levelbt = this.add.image(1280 / 2, 720 - 300, 'levelSelect').setInteractive({
                    cursor: 'pointer'
                });
                this.menubt = this.add.image(1280 / 2, 720 - 145, 'menuReturn').setInteractive({
                    cursor: 'pointer'
                });

                if (level != 'nothing') {
                    this.returnbt = this.add.image(1280 / 2, 720 - 610, 'gameReturn').setInteractive({
                        cursor: 'pointer'
                    });

                    this.returnbt.on('pointerdown', function() {
                        this.scene.stop('pause');
                        this.scene.resume(level);
                    }, this);

                    this.returnbt.on('pointerover', function() {
                        this.returnbt.setScale(1.2);
                    }, this);

                    this.returnbt.on('pointerout', function() {
                        this.returnbt.setScale(1);
                    }, this);

                    this.restartbt = this.add.image(1280 / 2, 720 - 455, 'gameRestart').setInteractive({
                        cursor: 'pointer'
                    });

                    this.restartbt.on('pointerdown', function() {
                        if (tutorialmusicIsPlaying) {
                            tutorialmusicIsPlaying = false;
                            tutorialmusic.stop();
                        }

                        if (music1IsPlaying) {
                            music1IsPlaying = false;
                            music1.stop();
                        }
                        this.scene.stop('pause');
                        this.scene.stop(level);
                        this.scene.start(level);
                    }, this);

                    this.restartbt.on('pointerover', function() {
                        this.restartbt.setScale(1.2);
                    }, this);

                    this.restartbt.on('pointerout', function() {
                        this.restartbt.setScale(1);
                    }, this);
                }

                this.levelbt.on('pointerdown', function() {
                    if (tutorialmusicIsPlaying) {
                        tutorialmusicIsPlaying = false;
                        tutorialmusic.stop();
                    }

                    if (music1IsPlaying) {
                        music1IsPlaying = false;
                        music1.stop();
                    }
                    this.scene.stop('pause');
                    this.scene.stop(level);
                    this.scene.start('levels');
                }, this);

                this.levelbt.on('pointerover', function() {
                    this.levelbt.setScale(1.2);
                }, this);

                this.levelbt.on('pointerout', function() {
                    this.levelbt.setScale(1);
                }, this);

                this.menubt.on('pointerdown', function() {
                    if (tutorialmusicIsPlaying) {
                        tutorialmusicIsPlaying = false;
                        tutorialmusic.stop();
                    }

                    if (music1IsPlaying) {
                        music1IsPlaying = false;
                        music1.stop();
                    }
                    this.scene.stop('pause');
                    this.scene.stop(level);
                    level = 'nothing';
                    this.scene.start('start');
                }, this);

                this.menubt.on('pointerover', function() {
                    this.menubt.setScale(1.2);
                }, this);

                this.menubt.on('pointerout', function(event) {
                    this.menubt.setScale(1);
                }, this);

                this.volumePlus.on('pointerdown', function() {
                    if (volumeLev < 1) {
                        volumeLev += 0.1;
                        trueVolumeLev = volumeLev.toFixed(1);
                        this.volumebt.setText('Volume: ' + trueVolumeLev * 10);
                        if (tutorialmusicIsPlaying) {
                            tutorialmusic.setVolume(volumeLev);
                        }

                        if (music1IsPlaying) {
                            music1.setVolume(volumeLev);
                        }

                        if (bgmusicIsPlaying) {
                            bgmusic.setVolume(volumeLev);
                        }
                    }
                }, this);

                this.volumeMinus.on('pointerdown', function() {
                    if (volumeLev > 0.1) {
                        volumeLev -= 0.1;
                        trueVolumeLev = volumeLev.toFixed(1);

                        this.volumebt.setText('Volume: ' + trueVolumeLev * 10);
                        if (tutorialmusicIsPlaying) {
                            tutorialmusic.setVolume(volumeLev);
                        }

                        if (music1IsPlaying) {
                            music1.setVolume(volumeLev);
                        }

                        if (bgmusicIsPlaying) {
                            bgmusic.setVolume(volumeLev);
                        }
                    }

                }, this);
            },

            update: function() {
                if (!autoRestart) {
                    this.autoRestartbt.setText('Enable Auto Restart');
                    this.autoRestartbt.on('pointerdown', function() {
                        autoRestart = true;
                        this.autoRestartbt.setText('Disable Auto Restart');
                    }, this);
                } else if (autoRestart) {
                    this.autoRestartbt.setText('Disable Auto Restart');
                    this.autoRestartbt.on('pointerdown', function() {
                        autoRestart = false;
                        this.autoRestartbt.setText('Enable Auto Restart');
                    }, this);
                }

                if (!this.muted) {
                    trueVolumeLev = volumeLev.toFixed(1);
                    this.mutebt.setText('Mute');
                    this.volumebt.setText('Volume: ' + trueVolumeLev * 10);
                    this.mutebt.on('pointerdown', function() {
                        volumeLev = 0;
                        this.muted = true;
                        if (tutorialmusicIsPlaying) {
                            tutorialmusic.setMute(true);
                            tutorialmusic.setVolume(volumeLev);
                        }

                        if (music1IsPlaying) {
                            music1.setMute(true);
                            music1.setVolume(volumeLev);
                        }

                        if (bgmusicIsPlaying) {
                            bgmusic.setMute(true);
                            bgmusic.setVolume(volumeLev);
                        }
                    }, this);
                } else if (this.muted) {
                    trueVolumeLev = volumeLev.toFixed(1);
                    this.mutebt.setText('Unmute')
                    this.volumebt.setText('Volume: ' + trueVolumeLev * 10);
                    this.mutebt.on('pointerdown', function() {
                        volumeLev = 1;
                        this.muted = false;
                        if (tutorialmusicIsPlaying) {
                            tutorialmusic.setMute(false);
                            tutorialmusic.setVolume(volumeLev);
                        }

                        if (music1IsPlaying) {
                            music1.setMute(false);
                            music1.setVolume(volumeLev);
                        }

                        if (bgmusicIsPlaying) {
                            bgmusic.setMute(false);
                            bgmusic.setVolume(volumeLev);
                        }
                    }, this);
                }
            }

        });

        var CreditsScene = new Phaser.Class({

            Extends: Phaser.Scene,

            initialize:

                function CreditsScene() {
                Phaser.Scene.call(this, {
                    key: 'credits'
                });
            },

            init: function() {
                this.leaderText;
                this.gameDevText;
                this.gameDesignText;
                this.webDevText;
                this.musicText1;
                this.musicText2;
                this.musicText3;
                this.fxText;
                this.menubt;
            },

            preload: function() {
                var progressbar = this.add.graphics();
                var percent = this.add.text(100, 430, '%', {
                    fontFamily: 'Minecraft',
                    fontSize: '32px',
                    fill: '#fff'
                });

                this.load.on('progress', function(value) {
                    progressbar.clear();
                    percent.setText(value.toFixed(2) * 100 + '%');
                    progressbar.fillStyle(0x355f76, 1);
                    progressbar.fillRect(100, 360, 1080 * value, 60);

                });

                this.load.on('complete', function() {

                    progressbar.destroy();
                    percent.destroy();

                });

                this.load.image('menuback2', 'assets/testob/menuback2.png');
                this.load.image('menu', 'assets/testob/returnmenu.png');
            },

            create: function() {
                if (!bgmusicIsPlaying) {
                    bgmusicIsPlaying = true;
                    bgmusic.play({
                        loop: false
                    });
                }
                this.add.image(0, 0, 'menuback2').setOrigin(0);
                this.menubt = this.add.image(1280 / 2, 600, 'menu').setInteractive({
                    cursor: 'pointer'
                });
                this.leaderText = this.add.text(16, 16, 'Team Leader: Aaron Hazzard', {
                    fontSize: '42px',
                    fontFamily: 'Minecraft',
                    fill: '#fff'
                });
                this.gameDesignText = this.add.text(16, 76, 'Game Art Designer: Aaron Hazzard', {
                    fontSize: '42px',
                    fontFamily: 'Minecraft',
                    fill: '#fff'
                });
                this.gameDevText = this.add.text(16, 136, 'Game Developer: Mallet Marie', {
                    fontSize: '42px',
                    fontFamily: 'Minecraft',
                    fill: '#fff'
                });
                this.webDevText = this.add.text(16, 196, 'Web Developer: Romaine Carter', {
                    fontSize: '42px',
                    fontFamily: 'Minecraft',
                    fill: '#fff'
                });
                this.musicText1 = this.add.text(16, 256, 'Music: https://loyaltyfreakmusic.com/music/', {
                    fontSize: '42px',
                    fontFamily: 'Minecraft',
                    fill: '#fff',
                }).setInteractive({
                    cursor: 'pointer'
                });

                this.musicText2 = this.add.text(16, 316, '       https://mrjoshuamclean.com', {
                    fontSize: '42px',
                    fontFamily: 'Minecraft',
                    fill: '#fff',
                }).setInteractive({
                    cursor: 'pointer'
                });

                this.musicText3 = this.add.text(16, 376, '       https://kubbimusic.com/', {
                    fontSize: '42px',
                    fontFamily: 'Minecraft',
                    fill: '#fff',
                }).setInteractive({
                    cursor: 'pointer'
                });

                this.fxText = this.add.text(16, 436, 'SFX: https://mixkit.co/free-sound-effects/', {
                    fontSize: '42px',
                    fontFamily: 'Minecraft',
                    fill: '#fff',
                }).setInteractive({
                    cursor: 'pointer'
                });

                this.musicText1.on('pointerup', this.musicLink1, this);
                this.musicText2.on('pointerup', this.musicLink2, this);
                this.musicText3.on('pointerup', this.musicLink3, this);
                this.fxText.on('pointerup', this.fxLink, this);

                this.menubt.on('pointerdown', function() {
                    if (tutorialmusicIsPlaying) {
                        tutorialmusicIsPlaying = false;
                        tutorialmusic.stop();
                    }

                    if (music1IsPlaying) {
                        music1IsPlaying = false;
                        music1.stop();
                    }
                    if (bgmusicIsPlaying) {
                        bgmusic.stop();
                        bgmusicIsPlaying = false;
                    }
                    this.scene.stop('credits');
                    this.scene.start('start');
                }, this);

                this.menubt.on('pointerover', function() {
                    this.menubt.setScale(1.2);
                }, this);

                this.menubt.on('pointerout', function(event) {
                    this.menubt.setScale(1);
                }, this);
            },

            musicLink1: function() {
                var url1 = 'https://loyaltyfreakmusic.com/music/';
                var s1 = window.open(url1, '_blank');

                if (s1 && s1.focus) {
                    s1.focus();
                } else if (!s1) {
                    window.location.href = url;
                }
            },

            musicLink2: function() {
                var url2 = 'https://mrjoshuamclean.com/';
                var s2 = window.open(url2, '_blank');

                if (s2 && s2.focus) {
                    s2.focus();
                } else if (!s2) {
                    window.location.href = url2;
                }
            },

            musicLink3: function() {
                var url3 = 'https://kubbimusic.com/';
                var s3 = window.open(url3, '_blank');

                if (s3 && s3.focus) {
                    s3.focus();
                } else if (!s3) {
                    window.location.href = url3;
                }
            },

            fxLink: function() {
                var url4 = 'https://mixkit.co/free-sound-effects/';
                var s4 = window.open(url4, '_blank');

                if (s4 && s4.focus) {
                    s4.focus();
                } else if (!s4) {
                    window.location.href = url4;
                }
            }

        });

        var SettingsScene = new Phaser.Class({

            Extends: Phaser.Scene,

            initialize:

                function SettingsScene() {
                Phaser.Scene.call(this, {
                    key: 'settings'
                });
            },

            init: function() //called everytime the scene restarts. I use it to declare variables, 'this' is used so that the scope of the variables is only within this scene.
                {
                    this.menubt;
                    this.mutebt;
                    this.volumePlus;
                    this.volumeMinus;
                    this.volumebt;
                    this.muted;
                    this.autoRestartbt;
                    this.showControlsbt
                },

            preload: function() {
                var progressbar = this.add.graphics();
                var percent = this.add.text(100, 430, '%', {
                    fontSize: '32px',
                    fontFamily: 'Minecraft',
                    fill: '#fff'
                });

                this.load.on('progress', function(value) {
                    progressbar.clear();
                    percent.setText(value.toFixed(2) * 100 + '%');
                    progressbar.fillStyle(0x355f76, 1);
                    progressbar.fillRect(100, 360, 1080 * value, 60);

                });

                this.load.on('complete', function() {

                    progressbar.destroy();
                    percent.destroy();

                });

                this.load.image('menuReturn', 'assets/testob/returnmenu.png');
                this.load.image('menuback2', 'assets/testob/menuback2.png');
            },

            create: function() {
                this.add.image(0, 0, 'menuback2').setOrigin(0);

                if (!bgmusicIsPlaying) {
                    bgmusicIsPlaying = true;
                    bgmusic.play({
                        loop: false
                    });
                }

                this.autoRestartbt = this.add.text(16, 136, '', {
                    fontSize: '32px',
                    fontFamily: 'Minecraft',
                    fill: '#fff'
                }).setInteractive({
                    cursor: 'pointer'
                });

                this.showControlsbt = this.add.text(16, 196, '', {
                    fontSize: '32px',
                    fontFamily: 'Minecraft',
                    fill: '#fff'
                }).setInteractive({
                    cursor: 'pointer'
                });

                this.mutebt = this.add.text(16, 16, '', {
                    fontSize: '32px',
                    fontFamily: 'Minecraft',
                    fill: '#fff'
                }).setInteractive({
                    cursor: 'pointer'
                });

                this.volumebt = this.add.text(16, 46, 'Volume: ' + trueVolumeLev, {
                    fontSize: '32px',
                    fontFamily: 'Minecraft',
                    fill: '#fff'
                }).setInteractive({
                    cursor: 'pointer'
                });

                this.volumePlus = this.add.text(16, 76, '+', {
                    fontSize: '32px',
                    fontFamily: 'Minecraft',
                    fill: '#fff'
                }).setInteractive({
                    cursor: 'pointer'
                });

                this.volumeMinus = this.add.text(36, 76, '-', {
                    fontSize: '32px',
                    fontFamily: 'Minecraft',
                    fill: '#fff'
                }).setInteractive({
                    cursor: 'pointer'
                });

                this.menubt = this.add.image(1280 / 2, 720 - 145, 'menuReturn').setInteractive({
                    cursor: 'pointer'
                });

                this.menubt.on('pointerdown', function() {
                    if (tutorialmusicIsPlaying) {
                        tutorialmusicIsPlaying = false;
                        tutorialmusic.stop();
                    }

                    if (music1IsPlaying) {
                        music1IsPlaying = false;
                        music1.stop();
                    }
                    if (bgmusicIsPlaying) {
                        bgmusic.stop();
                        bgmusicIsPlaying = false;
                    }
                    this.scene.stop('settings');
                    this.scene.start('start');
                }, this);

                this.menubt.on('pointerover', function() {
                    this.menubt.setScale(1.2);
                }, this);

                this.menubt.on('pointerout', function(event) {
                    this.menubt.setScale(1);
                }, this);

                this.volumePlus.on('pointerdown', function() {
                    if (volumeLev < 1) {
                        volumeLev += 0.1;
                        trueVolumeLev = volumeLev.toFixed(1);
                        console.log(volumeLev)
                        console.log(trueVolumeLev)
                        this.volumebt.setText('Volume: ' + trueVolumeLev * 10);
                        if (tutorialmusicIsPlaying) {
                            tutorialmusic.setVolume(volumeLev);
                        }

                        if (music1IsPlaying) {
                            music1.setVolume(volumeLev);
                        }

                        if (bgmusicIsPlaying) {
                            bgmusic.setVolume(volumeLev);
                        }
                    }
                }, this);

                this.volumeMinus.on('pointerdown', function() {
                    if (volumeLev > 0.1) {
                        volumeLev -= 0.1;
                        trueVolumeLev = volumeLev.toFixed(1);

                        this.volumebt.setText('Volume: ' + trueVolumeLev * 10);
                        if (tutorialmusicIsPlaying) {
                            tutorialmusic.setVolume(volumeLev);
                        }

                        if (music1IsPlaying) {
                            music1.setVolume(volumeLev);
                        }

                        if (bgmusicIsPlaying) {
                            bgmusic.setVolume(volumeLev);
                        }
                    }

                }, this);
            },

            update: function() {
                if (!autoRestart) {
                    this.autoRestartbt.setText('Enable Auto Restart');
                    this.autoRestartbt.on('pointerdown', function() {
                        autoRestart = true;
                        this.autoRestartbt.setText('Disable Auto Restart');
                    }, this);
                } else if (autoRestart) {
                    this.autoRestartbt.setText('Disable Auto Restart');
                    this.autoRestartbt.on('pointerdown', function() {
                        autoRestart = false;
                        this.autoRestartbt.setText('Enable Auto Restart');
                    }, this);
                }

                if (!showControls) {
                    this.showControlsbt.setText('Enable Controls Screen');
                    this.showControlsbt.on('pointerdown', function() {
                        showControls = true;
                        this.showControlsbt.setText('Disable Controls Screen');
                    }, this);
                } else if (showControls) {
                    this.showControlsbt.setText('Disable Controls Screen');
                    this.showControlsbt.on('pointerdown', function() {
                        showControls = false;
                        this.showControlsbt.setText('Enable Controls Screen');
                    }, this);
                }

                if (!this.muted) {
                    trueVolumeLev = volumeLev.toFixed(1);
                    this.mutebt.setText('Mute');
                    this.volumebt.setText('Volume: ' + trueVolumeLev * 10);
                    this.mutebt.on('pointerdown', function() {
                        volumeLev = 0;
                        this.muted = true;
                        if (tutorialmusicIsPlaying) {
                            tutorialmusic.setMute(true);
                            tutorialmusic.setVolume(volumeLev);
                        }

                        if (music1IsPlaying) {
                            music1.setMute(true);
                            music1.setVolume(volumeLev);
                        }

                        if (bgmusicIsPlaying) {
                            bgmusic.setMute(true);
                            bgmusic.setVolume(volumeLev);
                        }
                    }, this);
                } else if (this.muted) {
                    trueVolumeLev = volumeLev.toFixed(1);
                    this.mutebt.setText('Unmute')
                    this.volumebt.setText('Volume: ' + trueVolumeLev * 10);
                    this.mutebt.on('pointerdown', function() {
                        volumeLev = 1;
                        this.muted = false;
                        if (tutorialmusicIsPlaying) {
                            tutorialmusic.setMute(false);
                            tutorialmusic.setVolume(volumeLev);
                        }

                        if (music1IsPlaying) {
                            music1.setMute(false);
                            music1.setVolume(volumeLev);
                        }

                        if (bgmusicIsPlaying) {
                            bgmusic.setMute(false);
                            bgmusic.setVolume(volumeLev);
                        }
                    }, this);
                }
            }

        });

        var TitleSoonScene = new Phaser.Class({

            Extends: Phaser.Scene,

            initialize:

                function SettingsScene() {
                Phaser.Scene.call(this, {
                    key: 'titlesoon'
                });
            },

            init: function() //called everytime the scene restarts. I use it to declare variables, 'this' is used so that the scope of the variables is only within this scene.
                {
                    this.menubt;
                },

            preload: function() {
                var progressbar = this.add.graphics();
                var percent = this.add.text(100, 430, '%', {
                    fontSize: '32px',
                    fontFamily: 'Minecraft',
                    fill: '#fff'
                });

                this.load.on('progress', function(value) {
                    progressbar.clear();
                    percent.setText(value.toFixed(2) * 100 + '%');
                    progressbar.fillStyle(0x355f76, 1);
                    progressbar.fillRect(100, 360, 1080 * value, 60);

                });

                this.load.on('complete', function() {

                    progressbar.destroy();
                    percent.destroy();

                });

                this.load.image('menuReturn', 'assets/testob/returnmenu.png');
                this.load.image('menuback2', 'assets/testob/menuback2.png');
            },

            create: function() {
                this.add.image(0, 0, 'menuback2').setOrigin(0);

                if (!bgmusicIsPlaying) {
                    bgmusicIsPlaying = true;
                    bgmusic.play({
                        loop: false
                    });
                }

                this.add.text(1280 / 4, 720 - 420, 'Coming Soon', {
                    fontSize: '108px',
                    fontFamily: 'Minecraft',
                    fill: '#fff'
                });

                this.menubt = this.add.image(1280 / 2, 720 - 145, 'menuReturn').setInteractive({
                    cursor: 'pointer'
                });

                this.menubt.on('pointerdown', function() {
                    if (tutorialmusicIsPlaying) {
                        tutorialmusicIsPlaying = false;
                        tutorialmusic.stop();
                    }

                    if (music1IsPlaying) {
                        music1IsPlaying = false;
                        music1.stop();
                    }
                    this.scene.stop('titlesoon');
                    this.scene.start('start');
                }, this);

                this.menubt.on('pointerover', function() {
                    this.menubt.setScale(1.2);
                }, this);

                this.menubt.on('pointerout', function() {
                    this.menubt.setScale(1);
                }, this);
            },
        });

        var LevelSoonScene = new Phaser.Class({

            Extends: Phaser.Scene,

            initialize:

                function SettingsScene() {
                Phaser.Scene.call(this, {
                    key: 'lvlsoon'
                });
            },

            init: function() //called everytime the scene restarts. I use it to declare variables, 'this' is used so that the scope of the variables is only within this scene.
                {
                    this.levelbt;
                },

            preload: function() {
                var progressbar = this.add.graphics();
                var percent = this.add.text(100, 430, '%', {
                    fontSize: '32px',
                    fontFamily: 'Minecraft',
                    fill: '#fff'
                });

                this.load.on('progress', function(value) {
                    progressbar.clear();
                    percent.setText(value.toFixed(2) * 100 + '%');
                    progressbar.fillStyle(0x355f76, 1);
                    progressbar.fillRect(100, 360, 1080 * value, 60);

                });

                this.load.on('complete', function() {

                    progressbar.destroy();
                    percent.destroy();

                });

                this.load.image('levelSelect', 'assets/testob/nextlevel.png');
                this.load.image('menuback2', 'assets/testob/menuback2.png');
            },

            create: function() {
                this.add.image(0, 0, 'menuback2').setOrigin(0);

                if (!bgmusicIsPlaying) {
                    bgmusicIsPlaying = true;
                    bgmusic.play({
                        loop: false
                    });
                }

                this.add.text(1280 / 4, 720 - 420, 'Coming Soon', {
                    fontSize: '108px',
                    fontFamily: 'Minecraft',
                    fill: '#fff'
                });

                this.levelbt = this.add.image(1280 / 2, 720 - 145, 'levelSelect').setInteractive({
                    cursor: 'pointer'
                });

                this.levelbt.on('pointerdown', function() {
                    if (tutorialmusicIsPlaying) {
                        tutorialmusicIsPlaying = false;
                        tutorialmusic.stop();
                    }

                    if (music1IsPlaying) {
                        music1IsPlaying = false;
                        music1.stop();
                    }
                    this.scene.stop('lvlsoon');
                    this.scene.start('levels');
                }, this);

                this.levelbt.on('pointerover', function() {
                    this.levelbt.setScale(1.2);
                }, this);

                this.levelbt.on('pointerout', function() {
                    this.levelbt.setScale(1);
                }, this);
            },
        });

        var ControlScene = new Phaser.Class({

            Extends: Phaser.Scene,

            initialize:

                function SettingsScene() {
                Phaser.Scene.call(this, {
                    key: 'controls'
                });
            },

            init: function() //called everytime the scene restarts. I use it to declare variables, 'this' is used so that the scope of the variables is only within this scene.
                {
                    this.menubt;
                    this.continuebt;
                },

            preload: function() {
                var progressbar = this.add.graphics();
                var percent = this.add.text(100, 430, '%', {
                    fontSize: '32px',
                    fontFamily: 'Minecraft',
                    fill: '#fff'
                });

                this.load.on('progress', function(value) {
                    progressbar.clear();
                    percent.setText(value.toFixed(2) * 100 + '%');
                    progressbar.fillStyle(0x355f76, 1);
                    progressbar.fillRect(100, 360, 1080 * value, 60);

                });

                this.load.on('complete', function() {

                    progressbar.destroy();
                    percent.destroy();

                });

                this.load.image('menuReturn', 'assets/testob/returnmenu.png');
                this.load.image('menuback2', 'assets/testob/menuback2.png');
                this.load.image('continue', 'assets/testob/continue.png');
                this.load.image('up', 'assets/testob/Arrow_Up_Key_Light.png');
                this.load.image('down', 'assets/testob/Arrow_Down_Key_Light.png');
                this.load.image('left', 'assets/testob/Arrow_Left_Key_Light.png');
                this.load.image('right', 'assets/testob/Arrow_Right_Key_Light.png');
                this.load.image('w', 'assets/testob/W_Key_Light.png');
                this.load.image('a', 'assets/testob/A_Key_Light.png');
                this.load.image('s', 'assets/testob/S_Key_Light.png');
                this.load.image('d', 'assets/testob/D_Key_Light.png');
                this.load.image('mouse', 'assets/testob/Mouse_Left_Key_Light.png');
            },

            create: function() {
                this.add.image(0, 0, 'menuback2').setOrigin(0);
                showControls = false;

                if (!bgmusicIsPlaying) {
                    bgmusicIsPlaying = true;
                    bgmusic.play({
                        loop: false
                    });
                }

                this.menubt = this.add.image(1280 / 2, 720 - 145, 'menuReturn').setInteractive({
                    cursor: 'pointer'
                });

                this.continuebt = this.add.image(1280 / 2, 720 - 300, 'continue').setInteractive({
                    cursor: 'pointer'
                });

                this.add.image(250, 150, 'up');
                this.add.image(250, 220, 'down');
                this.add.image(180, 220, 'left');
                this.add.image(320, 220, 'right');

                this.add.image(1030, 150, 'w');
                this.add.image(1030, 220, 's');
                this.add.image(960, 220, 'a');
                this.add.image(1100, 220, 'd');

                this.add.image(640, 220, 'mouse');

                this.add.text(50, 250, 'Move left', {
                    fontSize: '24px',
                    fontFamily: 'Minecraft',
                    fill: '#fff'
                });
                this.add.text(350, 250, 'Move right', {
                    fontSize: '24px',
                    fontFamily: 'Minecraft',
                    fill: '#fff'
                });
                this.add.text(210, 260, 'Crouch', {
                    fontSize: '24px',
                    fontFamily: 'Minecraft',
                    fill: '#fff'
                });
                this.add.text(220, 80, 'Jump', {
                    fontSize: '24px',
                    fontFamily: 'Minecraft',
                    fill: '#fff'
                });
                this.add.text(535, 150, 'Click to shoot axe', {
                    fontSize: '24px',
                    fontFamily: 'Minecraft',
                    fill: '#fff'
                });
                this.add.text(570, 270, 'Move to aim', {
                    fontSize: '24px',
                    fontFamily: 'Minecraft',
                    fill: '#fff'
                });
                this.add.text(830, 250, 'Move left', {
                    fontSize: '24px',
                    fontFamily: 'Minecraft',
                    fill: '#fff'
                });
                this.add.text(1130, 250, 'Move right', {
                    fontSize: '24px',
                    fontFamily: 'Minecraft',
                    fill: '#fff'
                });
                this.add.text(990, 260, 'Crouch', {
                    fontSize: '24px',
                    fontFamily: 'Minecraft',
                    fill: '#fff'
                });
                this.add.text(1000, 80, 'Jump', {
                    fontSize: '24px',
                    fontFamily: 'Minecraft',
                    fill: '#fff'
                });

                this.menubt.on('pointerdown', function() {
                    if (tutorialmusicIsPlaying) {
                        tutorialmusicIsPlaying = false;
                        tutorialmusic.stop();
                    }

                    if (music1IsPlaying) {
                        music1IsPlaying = false;
                        music1.stop();
                    }
                    if (bgmusicIsPlaying) {
                        bgmusic.stop();
                        bgmusicIsPlaying = false;
                    }
                    this.scene.stop('controls');
                    this.scene.start('start');
                }, this);

                this.menubt.on('pointerover', function() {
                    this.menubt.setScale(1.2);
                }, this);

                this.menubt.on('pointerout', function(event) {
                    this.menubt.setScale(1);
                }, this);

                this.continuebt.on('pointerdown', function() {
                    if (tutorialmusicIsPlaying) {
                        tutorialmusicIsPlaying = false;
                        tutorialmusic.stop();
                    }

                    if (music1IsPlaying) {
                        music1IsPlaying = false;
                        music1.stop();
                    }
                    if (bgmusicIsPlaying) {
                        bgmusic.stop();
                        bgmusicIsPlaying = false;
                    }
                    this.scene.stop('controls');
                    this.scene.start('tutorial');
                }, this);

                this.continuebt.on('pointerover', function() {
                    this.continuebt.setScale(1.2);
                }, this);

                this.continuebt.on('pointerout', function(event) {
                    this.continuebt.setScale(1);
                }, this);
            },
        });

        var config = {
            type: Phaser.CANVAS,
            width: 1280,
            height: 720,
            physics: {
                default: 'arcade',
                arcade: {
                    gravity: {
                        y: 300
                    },
                    debug: false //disables visible object outlines and paths
                }
            },
            scene: [StartScene, Level1Scene, TutorialScene, GameOverScene, GameWinScene, LevelSelectScene, PauseScene, CreditsScene, SettingsScene, TitleSoonScene, LevelSoonScene, ControlScene]
        };

        var game = new Phaser.Game(config);
    </script>


    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>

    <section class="footer7 cid-suBGYnNpQ6" once="footers" id="footer7-7">





        <div class="container">
            <div class="media-container-row align-center mbr-white">
                <div class="col-12">
                    <p class="mbr-text mb-0 mbr-fonts-style display-7">
                        © Copyright 2021 DRGN Studios - All Rights Reserved
                    </p>
                </div>
            </div>
        </div>
    </section>
</body>

</html>